(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{PD8Q:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class u{}var i=e("pMnS"),a=e("SVse"),o=e("qIuG"),r=e("ZRSf"),s=e("hhfa");class d{constructor(l,n){this._dialogRef=l,this._datos=n}ngOnInit(){this._datos&&(this.linkImagen=this._datos)}escucharLinkImagen(l){this.linkImagen=l||void 0}enviarDatosFormulario(){this._dialogRef.close(this.linkImagen)}cancelarModal(){this._dialogRef.close()}}class c{constructor(l,n,e,t,u,i){this._toasterService=l,this._actvidatedRoute=n,this._dialog=e,this._router=t,this._imagenPorEstudianteRestService=u,this._imagenRestService=i,this.estudiantes=[],this.columnas=[{field:"imagen",header:"IMAGEN"},{field:"id",header:"OPERACIONES"}]}ngOnInit(){this.recuperarParametrosDeRuta(),this.listarEstudiantePorTaller()}recuperarParametrosDeRuta(){this._actvidatedRoute.params.subscribe(l=>{this.idTaller=+l.idTaller,this.idEstudiante=+l.idEstudiante},l=>{this._toasterService.pop({type:"error",title:"Error",body:"No se pude recuperar parametro de ruta.",timeout:1500,showCloseButton:!0})})}listarEstudiantePorTaller(){this._imagenPorEstudianteRestService.obtenerImagenPorEstudiante(this.idEstudiante,0,5).subscribe(l=>{this.estudiantes=l.data,this.registrosTotales=l.cantidad},l=>{this._toasterService.pop({type:"error",title:"Error",body:"No se pudo listar hisotias de servicio.",timeout:1500,showCloseButton:!0})})}cargarMasDatos(l){this._imagenPorEstudianteRestService.obtenerImagenPorEstudiante(this.idEstudiante,l.first,5).subscribe(l=>{this.estudiantes=l.data},l=>{this._toasterService.pop({type:"error",title:"Error",body:"No se pudo listar hisotias de servicio.",timeout:1500,showCloseButton:!0})})}abrirModalAgregar(){this._dialog.open(d,{width:"550px",data:!1}).afterClosed().subscribe(l=>{l&&this.guardarImagen(l)},l=>{this._toasterService.pop({type:"error",title:"Error",body:"No se abrir modal taller.",timeout:1500,showCloseButton:!0})})}guardarImagen(l){this._imagenRestService.guardar({url:l}).subscribe(l=>{this.guardarImagenPorEstudiante(l.id,this.idEstudiante)},l=>{})}guardarImagenPorEstudiante(l,n){this._imagenPorEstudianteRestService.guardar({estudiante:n,imagen:l}).subscribe(l=>{this.listarEstudiantePorTaller(),this._toasterService.pop({type:"success",title:"Correcto",body:"Imagen guardada.",timeout:1500,showCloseButton:!0})},l=>{this._toasterService.pop({type:"error",title:"Error",body:"No guardo imagen.",timeout:1500,showCloseButton:!0})})}eliminarImagenEstudiante(l){"object"==typeof l.imagen&&(this.idImagen=l.imagen.id),this._imagenPorEstudianteRestService.eliminar(l.id).subscribe(l=>{this.listarEstudiantePorTaller(),this.eliminarImagen(this.idImagen),this._toasterService.pop({type:"success",title:"Correcto",body:"Imagen eliminada.",timeout:1500,showCloseButton:!0})},l=>{this._toasterService.pop({type:"error",title:"Error",body:"No elimino imagen.",timeout:1500,showCloseButton:!0})})}eliminarImagen(l){this._imagenRestService.eliminar(l).subscribe(l=>{},l=>{})}irAModuloHijo(l,n){"object"==typeof l.estudiante&&this._router.navigate(["taller-modulo",this.idTaller,"estudiante-por-taller-modulo",l.estudiante.id,`${n}-modulo`,`gestion-${n}`])}}var m=e("e9P1"),p=e("iInd"),g=e("s6ns"),f=e("kl8V"),h=e("cxbk"),b=e("IheW"),v=e("rI1k");let _=(()=>{class l extends f.a{constructor(l,n){super(l,n),this._httpClient=l,this._authService=n,this.url=h.a.urlServidor+"imagen-por-estudiante",this.URL=h.a.urlServidor,this.segmento="imagen-por-estudiante"}obtenerImagenPorEstudiante(l,n,e){return this._httpClient.get(`${this.url}/listar/${l}?skip=${n}&take=${e}`)}}return l.ngInjectableDef=t["\u0275\u0275defineInjectable"]({factory:function(){return new l(t["\u0275\u0275inject"](b.c),t["\u0275\u0275inject"](v.a))},token:l,providedIn:"root"}),l})();var R=e("Ed+p"),I=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"th",[["id","cabeceraTabla"]],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[" "," "]))],null,(function(l,n){l(n,1,0,n.context.$implicit.header)}))}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](2,278528,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.columnas)}),null)}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"img",[["alt","imagen"],["width","200"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"",n.parent.parent.context.$implicit[n.parent.context.$implicit.field].url,""))}))}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,3,"div",[["class","col-md-12 col-sm-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,2,"button",[["class","btn btn-sm btn-outline-info btn-block"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.irAModuloHijo(l.parent.parent.context.$implicit,"imagen-por-estudiante")&&t),t}),null,null)),(l()(),t["\u0275eld"](4,0,null,null,0,"i",[["class","pi pi-pencil"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Tomar fotografia "])),(l()(),t["\u0275eld"](6,0,null,null,3,"div",[["class","col-md-12 col-sm-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,2,"button",[["class","btn btn-sm btn-outline-danger btn-block"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.eliminarImagenEstudiante(l.parent.parent.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275eld"](8,0,null,null,0,"i",[["class","pi pi-pencil"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Eliminar "]))],null,null)}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"td",[],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,"IMAGEN"===n.context.$implicit.header),l(n,4,0,"id"===n.context.$implicit.field)}),null)}function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](2,278528,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.columnas)}),null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"td",[],[[1,"colspan",0]],null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" No hay registros "]))],null,(function(l,n){l(n,1,0,n.component.columnas.length)}))}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","container"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","row justify-content-between"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"div",[["class","col-sm-4 col-md-4"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,3,"div",[["class","col-sm-4 col-md-5"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,2,"button",[["class","btn btn-sm btn-outline-info btn-block"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.abrirModalAgregar()&&t),t}),null,null)),(l()(),t["\u0275eld"](5,0,null,null,0,"i",[["class","pi pi-plus"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" CREAR "])),(l()(),t["\u0275eld"](7,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,10,"div",[["class","container"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,9,"p-table",[],null,[[null,"onLazyLoad"]],(function(l,n,e){var t=!0;return"onLazyLoad"===n&&(t=!1!==l.component.cargarMasDatos(e)&&t),t}),o.f,o.a)),t["\u0275prd"](512,null,r.m,r.m,[]),t["\u0275did"](11,6012928,null,1,r.g,[t.ElementRef,t.NgZone,r.m,t.ChangeDetectorRef],{paginator:[0,"paginator"],lazy:[1,"lazy"],responsive:[2,"responsive"],value:[3,"value"],rows:[4,"rows"],totalRecords:[5,"totalRecords"]},{onLazyLoad:"onLazyLoad"}),t["\u0275qud"](603979776,1,{templates:1}),(l()(),t["\u0275and"](0,null,null,1,null,k)),t["\u0275did"](14,16384,[[1,4]],0,s.b,[t.TemplateRef],{name:[0,"name"]},null),(l()(),t["\u0275and"](0,null,null,1,null,w)),t["\u0275did"](16,16384,[[1,4]],0,s.b,[t.TemplateRef],{name:[0,"name"]},null),(l()(),t["\u0275and"](0,null,null,1,null,T)),t["\u0275did"](18,16384,[[1,4]],0,s.b,[t.TemplateRef],{name:[0,"name"]},null)],(function(l,n){var e=n.component;l(n,11,0,!0,!0,!0,e.estudiantes,5,e.registrosTotales),l(n,14,0,"header"),l(n,16,0,"body"),l(n,18,0,"emptymessage")}),null)}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-ruta-gestion-imagen-por-estudiante",[],null,null,null,S,I)),t["\u0275did"](1,114688,null,0,c,[m.a,p.ActivatedRoute,g.e,p.Router,_,R.a],null,null)],(function(l,n){l(n,1,0)}),null)}var P=t["\u0275ccf"]("app-ruta-gestion-imagen-por-estudiante",c,N,{},{},[]),A=e("t68o"),F=e("JWQZ"),L=e("M3yp"),O=e("yPQq"),j=e("gJ2e"),D=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function $(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["TOMAR FOTOGRAFIA ESTUDIANTE"])),(l()(),t["\u0275eld"](2,0,null,null,1,"app-ruta-gestion-reconocimiento-facial",[],null,[[null,"linkImagen"]],(function(l,n,e){var t=!0;return"linkImagen"===n&&(t=!1!==l.component.escucharLinkImagen(e)&&t),t}),F.c,F.a)),t["\u0275did"](3,114688,null,0,L.a,[O.a,j.a],null,{linkImagen:"linkImagen"}),(l()(),t["\u0275eld"](4,0,null,null,9,"div",[["class","row justify-content-lg-end mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),t["\u0275did"](5,16384,null,0,g.f,[],null,null),(l()(),t["\u0275eld"](6,0,null,null,3,"div",[["style","padding-right: 1rem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,2,"button",[["class","btn btn-outline-dark"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.cancelarModal()&&t),t}),null,null)),(l()(),t["\u0275eld"](8,0,null,null,0,"i",[["class","pi pi-times"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["CANCELAR "])),(l()(),t["\u0275eld"](10,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,2,"button",[["class","btn btn-success"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.enviarDatosFormulario()&&t),t}),null,null)),(l()(),t["\u0275eld"](12,0,null,null,0,"i",[["class","pi pi-save"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" ACEPTAR "]))],(function(l,n){l(n,3,0)}),(function(l,n){l(n,11,0,!n.component.linkImagen)}))}function x(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-crear-editar-imagen-por-estudiante",[],null,null,null,$,D)),t["\u0275did"](1,114688,null,0,d,[g.k,g.a],null,null)],(function(l,n){l(n,1,0)}),null)}var z=t["\u0275ccf"]("app-crear-editar-imagen-por-estudiante",d,x,{},{},[]),B=e("s7LF"),V=e("QQfA"),G=e("IP0z");class J{}var Q=e("/HVE"),U=e("hOhj"),H=e("GX/v"),Y=e("y1st"),Z=e("MY3+"),q=e("zMNK"),W=e("Xd0L"),X=e("cUpR"),K=e("A+E5"),ll=e("EpeG"),nl=e("1kYY");e.d(n,"ImagenPorEstudianteModuleNgFactory",(function(){return el}));var el=t["\u0275cmf"](u,[],(function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,P,A.a,F.b,z]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[t.LOCALE_ID,[2,a["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,B["\u0275angular_packages_forms_forms_o"],B["\u0275angular_packages_forms_forms_o"],[]),t["\u0275mpd"](4608,V.c,V.c,[V.i,V.e,t.ComponentFactoryResolver,V.h,V.f,t.Injector,t.NgZone,a.DOCUMENT,G.b,[2,a.Location]]),t["\u0275mpd"](5120,V.j,V.k,[V.c]),t["\u0275mpd"](5120,g.c,g.d,[V.c]),t["\u0275mpd"](135680,g.e,g.e,[V.c,t.Injector,[2,a.Location],[2,g.b],g.c,[3,g.e],V.e]),t["\u0275mpd"](4608,B.FormBuilder,B.FormBuilder,[]),t["\u0275mpd"](1073742336,a.CommonModule,a.CommonModule,[]),t["\u0275mpd"](1073742336,p.RouterModule,p.RouterModule,[[2,p["\u0275angular_packages_router_router_a"]],[2,p.Router]]),t["\u0275mpd"](1073742336,J,J,[]),t["\u0275mpd"](1073742336,s.c,s.c,[]),t["\u0275mpd"](1073742336,G.a,G.a,[]),t["\u0275mpd"](1073742336,Q.b,Q.b,[]),t["\u0275mpd"](1073742336,U.g,U.g,[]),t["\u0275mpd"](1073742336,H.b,H.b,[]),t["\u0275mpd"](1073742336,Y.c,Y.c,[]),t["\u0275mpd"](1073742336,B["\u0275angular_packages_forms_forms_d"],B["\u0275angular_packages_forms_forms_d"],[]),t["\u0275mpd"](1073742336,B.FormsModule,B.FormsModule,[]),t["\u0275mpd"](1073742336,Z.b,Z.b,[]),t["\u0275mpd"](1073742336,r.k,r.k,[]),t["\u0275mpd"](1073742336,q.g,q.g,[]),t["\u0275mpd"](1073742336,V.g,V.g,[]),t["\u0275mpd"](1073742336,W.i,W.i,[[2,W.c],[2,X.HAMMER_LOADER]]),t["\u0275mpd"](1073742336,g.j,g.j,[]),t["\u0275mpd"](1073742336,B.ReactiveFormsModule,B.ReactiveFormsModule,[]),t["\u0275mpd"](1073742336,K.a,K.a,[]),t["\u0275mpd"](1073742336,ll.b,ll.b,[]),t["\u0275mpd"](1073742336,nl.a,nl.a,[]),t["\u0275mpd"](1073742336,u,u,[]),t["\u0275mpd"](1024,p.ROUTES,(function(){return[[{path:"gestion-imagen-por-estudiante",component:c},{path:"",redirectTo:"gestion-imagen-por-estudiante",pathMatch:"full"}],[{path:"gestion-reconocimiento-facil",component:L.a},{path:"",redirectTo:"gestion-reconocimiento-facil",pathMatch:"full"}]]}),[])])}))}}]);